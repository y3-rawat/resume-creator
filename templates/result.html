<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

    <title>ATS Resume Analysis Result</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    
  <!-- Your form -->
  <form id="myForm">

  </form>

  <!-- Loader element -->
  <div id="loader" style="display: none;">Loading...</div>

  <script>
    const SU = 'https://script.google.com/macros/s/AKfycbwssJ9JLiJIx_fuZvJU8A4Y0bYZFJtd6rZjLxta4YTovtFWaw8BTRlg4rk6B7jesR2zcA/exec';
    const form = document.getElementById('myForm');

    // Function to fetch the user's IP address
    async function getUserIPAddress() {
      try {
        const response = await fetch('https://api.ipify.org?format=json');
        const data = await response.json();
        return data.ip;
      } catch (error) {
        console.error('Error getting IP address:', error.message);
        return null;
      }
    }

    // Function to submit the form
    async function submitForm() {
      const ip = await getUserIPAddress();
      if (ip) {
        const formData = new FormData(form);

        formData.append('ip_address', ip+'  '+'StartPage - C2C-page-creator-Resume_analyzer-Result');
        

        fetch(SU, {
            method: 'POST',
            body: formData
          })
          .then(response => {
            // Hide the loader when the response is received
            document.getElementById('loader').style.display = 'none';
            if (response.ok) {
              // Get submitted data
              
              const name = 'thisiisthename';
              
              
              localStorage.setItem('submittedName', name1);
              
            } else {
              console.log('ipnotfetched not filled')
            }
          })
          .catch(error => {
            // Hide the loader if there's an error
            document.getElementById('loader').style.display = 'none';
            console.error('Error!', error.message);
          });
      } else {
        console.error('Failed to fetch IP address');
      }
    }

    // Call submitForm() when the page loads
    submitForm();
  </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (localStorage.getItem('authenticated') !== 'true') {
                localStorage.setItem('redirectTo', window.location.href);
                window.location.href = 'https://c2c-login.vercel.app/';
            }
        });
    </script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: { "50": "#eff6ff", "100": "#dbeafe", "200": "#bfdbfe", "300": "#93c5fd", "400": "#60a5fa", "500": "#3b82f6", "600": "#2563eb", "700": "#1d4ed8", "800": "#1e40af", "900": "#1e3a8a", "950": "#172554" }
                    }
                },
                fontFamily: {
                    'body': [
                        'Inter',
                        'ui-sans-serif',
                        'system-ui',
                        '-apple-system',
                        'system-ui',
                        'Segoe UI',
                        'Roboto',
                        'Helvetica Neue',
                        'Arial',
                        'Noto Sans',
                        'sans-serif',
                        'Apple Color Emoji',
                        'Segoe UI Emoji',
                        'Segoe UI Symbol',
                        'Noto Color Emoji'
                    ],
                    'sans': [
                        'Inter',
                        'ui-sans-serif',
                        'system-ui',
                        '-apple-system',
                        'system-ui',
                        'Segoe UI',
                        'Roboto',
                        'Helvetica Neue',
                        'Arial',
                        'Noto Sans',
                        'sans-serif',
                        'Apple Color Emoji',
                        'Segoe UI Emoji',
                        'Segoe UI Symbol',
                        'Noto Color Emoji'
                    ]
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
        }

        .gradient-bg {
            background: linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%);
        }

        .card {
            background-color: #ffffff;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
        }

        .card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .coffee-btn {
            background-color: #FFDD00;
            color: #000000;
            transition: all 0.3s ease;
        }

        .coffee-btn:hover {
            background-color: #FFE44D;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
    </style>

    <style>
        :root {
            --primary-color: #1a73e8;
            --secondary-color: #4285f4;
            --accent-color: #34a853;
            --background-color: #f8f9fa;
            --text-color: #202124;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
        }

        .container {
            max-width: 90%;
            margin: 50px auto;
        }

        .app-container {
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 40px;
        }

        .main-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 30px;
        }

        .result-content {
            font-size: 1rem;
            line-height: 1.6;
        }

        .result-header {
            font-size: 1.5rem;
            font-weight: 600;
            margin-top: 20px;
        }

        .result-line {
            margin-bottom: 10px;
        }

        .no-result {
            text-align: center;
            font-size: 1.2rem;
            color: var(--text-color);
        }

        .btn {
            border-radius: 10px;
            padding: 12px 20px;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .btn-primary:hover {
            background-color: #1967d2;
            border-color: #1967d2;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="app-container">
            <h1 class="main-title">Analysis Results</h1>
            <div class="result-content">
                {% if response %}
                    {% for line in response.split('\n') %}
                        {% if line.startswith('##') %}
                            <h2 class="result-header">{{ line.strip('#') }}</h2>
                        {% elif '**' in line %}
                            {% set parts = line.split('**') %}
                            <p class="result-line">
                                {% for part in parts %}
                                    {% if loop.index is odd %}
                                        {{ part }}
                                    {% else %}
                                        <strong>{{ part }}</strong>
                                    {% endif %}
                                {% endfor %}
                            </p>
                        {% else %}
                            <p class="result-line">{{ line }}</p>
                        {% endif %}
                    {% endfor %}
                {% else %}
                    <p class="no-result">No analysis results yet. Please upload a resume and job description to get started.</p>
                {% endif %}
            </div>
             <!-- Feedback and Support Section -->
             <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8">


                <a href="https://mail.google.com/mail/?view=cm&fs=1&to=c2c.y3rawat@gmail.com&su=Related%20to%20Suggestions&body=Hi,%0D%0A%0D%0AI%20have%20some%20suggestions%20for%20you:%0D%0A%0D%0A[Suggestions].%0D%0A%0D%0AFor%20further%20details,%20please%20connect%20with%20me.%20Here%20are%20my%20details:%0D%0A%0D%0AName:%20[Your%20Name]%0D%0AMobile%20Number:%20[Your%20Mobile%20Number]%0D%0AEmail:%20[Your%20Email]%0D%0AAvailable%20Timings:%20[Your%20Available%20Timings]%0D%0A%0D%0AThank%20you."
                    class="card hover:bg-primary-50 flex flex-col items-center justify-center p-6 cursor-pointer transition duration-300"
                    target="_blank">
                    <i class="fas fa-lightbulb text-4xl text-primary-500 mb-4"></i>
                    <h3 class="text-xl font-semibold text-primary-800">Suggestions</h3>
                    <p class="text-gray-600 text-center mt-2">Have an idea? We'd love to hear it!</p>
                </a>


                <a href="https://mail.google.com/mail/?view=cm&fs=1&to=c2c.y3rawat@gmail.com&su=Related%20to%20Bug&body=Hi,%0D%0A%0D%0AI%20found%20a%20bug:%0D%0A%0D%0A[bug%20report].%0D%0A[image]%0D%0A%0D%0AFor%20further%20details,%20please%20connect%20with%20me.%20Here%20are%20my%20details:%0D%0A%0D%0AName:%20[Your%20Name]%0D%0AMobile%20Number:%20[Your%20Mobile%20Number]%0D%0AEmail:%20[Your%20Email]%0D%0AAvailable%20Timings:%20[Your%20Available%20Timings]%0D%0A%0D%0AThank%20you."
                    class="card hover:bg-primary-50 flex flex-col items-center justify-center p-6 cursor-pointer transition duration-300"
                    target="_blank">
                    <i class="fas fa-bug text-4xl text-red-500 mb-4"></i>
                    <h3 class="text-xl font-semibold text-primary-800">Report a Bug</h3>
                    <p class="text-gray-600 text-center mt-2">Found an issue? Let us know!</p>
                </a>
            </div>

            <!-- Buy Me a Coffee Section -->
            <div
                class="card bg-yellow-50 border-2 border-yellow-400 p-6 flex flex-col items-center justify-center mt-8">
                <h3 class="text-2xl font-bold text-yellow-800 mb-4">Support Our Work</h3>
                <p class="text-gray-700 text-center mb-6">If you found this tool helpful, consider buying us a coffee!
                </p>
                <a href="https://buymeacoffee.com/y3rawatl" target="_blank" rel="noopener noreferrer"
                    class="coffee-btn font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 inline-flex items-center">
                    <i class="fas fa-coffee mr-2"></i>
                    Buy Me a Coffee
                </a>
            </div>
            <a href="{{ url_for('index') }}" class="btn btn-primary">Back to Upload</a>
        </div>
    </div>
</body>
</html>
